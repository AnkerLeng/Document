8.1
mysql

docker run -it --name mysql debian:jessie /bin/bash

为了安装最新版的MySQL需要对APT软件创库中MySQL的软件源进行配置
将MySQL的源地址加入APT软件源列表配置中

echo "deb http://repo.mysql.com/apt/debian/ jessie mysql-5.7" > /etc/apt/sources.list.d/mysql.list

除了添加源地址,为了保证软件的安全性和完整性,APT还会检查软件包的签名,所以需要把MySQL的软件包签名加入到APT中

apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys A4A9406876FCBD3C456770C88C718D3B5072E1F5

再进行APT仓库的更新
apt-get update

先通过APT安装perl和pwgen两个软件,因为MySQL初始化的时候需要用到这连个软件
apt-get install -y --no-install-recommends perl pwgen

接着就可哟通过APT安装MySQL了

apt-get install -y mysql-server="5.7.15-1debian8" (5.7.15 改成5.7.20)

安装过程需要输入root密码

使用mysqld启动MySQL,因为mysql 禁止了root用户启动服务,所以会报错
mysqld

创建一个新的用户
groupadd -r mysql
useradd -r -g mysql mysql

mysqld --user mysql

构建MySQL dockerfile
```
#MySQL

#VERSION 0.0.1

#基础镜像

FROM debian:jessie

#维护者信息

#MAINTAINER You Ming <youming@funcuter.org>

#增加运行用户

RUN groupadd -r mysql && useradd -r -g mysql mysql

#增加安装源

RUN echo "deb http://repo.mysql.com/apt/debian/ jessie mysql-5.7" > /etc/apt/sources.list.d/mysql.list && apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys A4A9406876FCBD3C456770C88C718D3B5072E1F5 && apt-get update && apt-get install -y --no-install-recommends perl pwgen

#安装MySQL

RUN {
#设置MySQL用户密码
	echo mysql-community-server mysql-community-server/root-pass password '';
	echo mysql-community-server mysql-community-server/re-root-pass password '';
} | debconf-set-selections
&& apt-get install -y mysql-server="5.7.20-1debian8" && mkdir -p /var/lib/mysql /var/run/mysqld && chown -R mysql:mysql /var/lib/mysql /var/run/mysqld && chmod 777 /var/run/mysqld

#以数据卷的形式挂载MySQL存储数据的目录

VOLUME /var/lib/mysql

#暴露MySQL的默认端口

EXPOSE 3306

#启动MySQL

CMD ["mysqld","--user","mysql"]

```

docker build -t ymdot/mysql:0.0.1 ./mysql


构建MongoDB镜像
```
#MongoDB

#VERSION 0.0.1

#基础镜像

FROM ubuntu:16.04

#维护者信息

#MAINTAINER You Ming <youming@funcuter.org>

#安装MongoDB

RUN apt-get adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927 \
	&& echo "deb http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.2 multiverse" >
 /etc/apt/sources.list.d/mongodb-org-3.2.list \
 	&& apt-get update \
 	&& apt-get install -y mongodb-org=3.2.9 mongodb-org-server=3.2.9

 #以数据卷的形式挂载MongoDB存储数据的目录

 VOLUME /data/db

 #暴露MongoDB默认端口 其中28017是MongoDB提供的HTTP界面的端口

 EXPOSE 27017 28017

 #启动MongoDB

 CMD ["mongod","--httpinterface"]
  
```


